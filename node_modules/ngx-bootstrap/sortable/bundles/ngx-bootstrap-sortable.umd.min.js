!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("rxjs")):"function"==typeof define&&define.amd?define("ngx-bootstrap/sortable",["exports","@angular/core","@angular/common","@angular/forms","rxjs"],t):t(((e=e||self)["ngx-bootstrap"]=e["ngx-bootstrap"]||{},e["ngx-bootstrap"].sortable={}),e.ng.core,e.ng.common,e.ng.forms,e.rxjs)}(this,(function(e,t,n,r,i){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e}var s=function(){function e(){this.onCapture=new i.Subject}return e.prototype.dragStart=function(e){this.draggableItem=e},e.prototype.getItem=function(){return this.draggableItem},e.prototype.captureItem=function(e,t){return this.draggableItem.overZoneIndex!==e&&(this.draggableItem.lastZoneIndex=this.draggableItem.overZoneIndex,this.draggableItem.overZoneIndex=e,this.onCapture.next(this.draggableItem),this.draggableItem=Object.assign({},this.draggableItem,{overZoneIndex:e,i:t})),this.draggableItem},e.prototype.onCaptureItem=function(){return this.onCapture},e.ɵfac=function(t){return new(t||e)},e.ɵprov=t["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac}),e}();function l(e,n){if(1&e){var r=t["ɵɵgetCurrentView"]();t["ɵɵelementStart"](0,"div",4),t["ɵɵlistener"]("dragover",(function(e){return t["ɵɵrestoreView"](r),t["ɵɵnextContext"]().onItemDragover(e,0)}))("dragenter",(function(e){return t["ɵɵrestoreView"](r),t["ɵɵnextContext"]().cancelEvent(e)})),t["ɵɵtext"](1),t["ɵɵelementEnd"]()}if(2&e){var i=t["ɵɵnextContext"]();t["ɵɵproperty"]("ngClass",i.placeholderClass)("ngStyle",i.placeholderStyle),t["ɵɵadvance"](1),t["ɵɵtextInterpolate"](i.placeholderItem)}}function c(e,t){}var u=function(e,t){return[e,t]},d=function(e,t){return{item:e,index:t}};function p(e,n){if(1&e){var r=t["ɵɵgetCurrentView"]();t["ɵɵelementStart"](0,"div",5),t["ɵɵlistener"]("dragstart",(function(e){t["ɵɵrestoreView"](r);var i=n.$implicit,o=n.index;return t["ɵɵnextContext"]().onItemDragstart(e,i,o)}))("dragend",(function(e){return t["ɵɵrestoreView"](r),t["ɵɵnextContext"]().resetActiveItem(e)}))("dragover",(function(e){t["ɵɵrestoreView"](r);var i=n.index;return t["ɵɵnextContext"]().onItemDragover(e,i)}))("dragenter",(function(e){return t["ɵɵrestoreView"](r),t["ɵɵnextContext"]().cancelEvent(e)})),t["ɵɵtemplate"](1,c,0,0,"ng-template",6),t["ɵɵelementEnd"]()}if(2&e){var i=n.$implicit,o=n.index,a=t["ɵɵnextContext"](),s=t["ɵɵreference"](4);t["ɵɵproperty"]("ngClass",t["ɵɵpureFunction2"](5,u,a.itemClass,o===a.activeItem?a.itemActiveClass:""))("ngStyle",a.getItemStyle(o===a.activeItem)),t["ɵɵattribute"]("aria-grabbed",o===a.activeItem),t["ɵɵadvance"](1),t["ɵɵproperty"]("ngTemplateOutlet",a.itemTemplate||s)("ngTemplateOutletContext",t["ɵɵpureFunction2"](8,d,i,o))}}function m(e,n){if(1&e&&t["ɵɵtext"](0),2&e){var r=n.item;t["ɵɵtextInterpolate"](r.value)}}var g=function(){function e(n){var r=this;this.wrapperClass="",this.wrapperStyle={},this.itemClass="",this.itemStyle={},this.itemActiveClass="",this.itemActiveStyle={},this.placeholderClass="",this.placeholderStyle={},this.placeholderItem="",this.onChange=new t.EventEmitter,this.showPlaceholder=!1,this.activeItem=-1,this.onTouched=Function.prototype,this.onChanged=Function.prototype,this.transfer=n,this.currentZoneIndex=e.globalZoneIndex++,this.transfer.onCaptureItem().subscribe((function(e){return r.onDrop(e)}))}return Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e;var t=this.items.map((function(e){return e.initData}));this.onChanged(t),this.onChange.emit(t)},enumerable:!0,configurable:!0}),e.prototype.onItemDragstart=function(e,t,n){this.initDragstartEvent(e),this.onTouched(),this.transfer.dragStart({event:e,item:t,i:n,initialIndex:n,lastZoneIndex:this.currentZoneIndex,overZoneIndex:this.currentZoneIndex})},e.prototype.onItemDragover=function(e,t){if(this.transfer.getItem()){e.preventDefault();var n=this.transfer.captureItem(this.currentZoneIndex,this.items.length),r=[];r=this.items.length?n.i>t?a(this.items.slice(0,t),[n.item],this.items.slice(t,n.i),this.items.slice(n.i+1)):a(this.items.slice(0,n.i),this.items.slice(n.i+1,t+1),[n.item],this.items.slice(t+1)):[n.item],this.items=r,n.i=t,this.activeItem=t,this.updatePlaceholderState()}},e.prototype.cancelEvent=function(e){this.transfer.getItem()&&e&&e.preventDefault()},e.prototype.onDrop=function(e){e&&e.overZoneIndex!==this.currentZoneIndex&&e.lastZoneIndex===this.currentZoneIndex&&(this.items=this.items.filter((function(t,n){return n!==e.i})),this.updatePlaceholderState()),this.resetActiveItem(void 0)},e.prototype.resetActiveItem=function(e){this.cancelEvent(e),this.activeItem=-1},e.prototype.registerOnChange=function(e){this.onChanged=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.writeValue=function(e){var t=this;this.items=e?e.map((function(e,n){return{id:n,initData:e,value:t.fieldName?e[t.fieldName]:e}})):[],this.updatePlaceholderState()},e.prototype.updatePlaceholderState=function(){this.showPlaceholder=!this._items.length},e.prototype.getItemStyle=function(e){return e?Object.assign({},this.itemStyle,this.itemActiveStyle):this.itemStyle},e.prototype.initDragstartEvent=function(e){e.dataTransfer.setData("Text","placeholder")},e.globalZoneIndex=0,e.ɵfac=function(n){return new(n||e)(t["ɵɵdirectiveInject"](s))},e.ɵcmp=t["ɵɵdefineComponent"]({type:e,selectors:[["bs-sortable"]],inputs:{fieldName:"fieldName",wrapperClass:"wrapperClass",wrapperStyle:"wrapperStyle",itemClass:"itemClass",itemStyle:"itemStyle",itemActiveClass:"itemActiveClass",itemActiveStyle:"itemActiveStyle",placeholderClass:"placeholderClass",placeholderStyle:"placeholderStyle",placeholderItem:"placeholderItem",itemTemplate:"itemTemplate"},outputs:{onChange:"onChange"},exportAs:["bs-sortable"],features:[t["ɵɵProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return e})),multi:!0}])],decls:5,vars:4,consts:[[3,"ngClass","ngStyle","dragover","dragenter","drop","mouseleave"],[3,"ngClass","ngStyle","dragover","dragenter",4,"ngIf"],["draggable","true","aria-dropeffect","move",3,"ngClass","ngStyle","dragstart","dragend","dragover","dragenter",4,"ngFor","ngForOf"],["defItemTemplate",""],[3,"ngClass","ngStyle","dragover","dragenter"],["draggable","true","aria-dropeffect","move",3,"ngClass","ngStyle","dragstart","dragend","dragover","dragenter"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(t["ɵɵelementStart"](0,"div",0),t["ɵɵlistener"]("dragover",(function(e){return n.cancelEvent(e)}))("dragenter",(function(e){return n.cancelEvent(e)}))("drop",(function(e){return n.resetActiveItem(e)}))("mouseleave",(function(e){return n.resetActiveItem(e)})),t["ɵɵtemplate"](1,l,2,3,"div",1),t["ɵɵtemplate"](2,p,2,11,"div",2),t["ɵɵelementEnd"](),t["ɵɵtemplate"](3,m,1,1,"ng-template",null,3,t["ɵɵtemplateRefExtractor"])),2&e&&(t["ɵɵproperty"]("ngClass",n.wrapperClass)("ngStyle",n.wrapperStyle),t["ɵɵadvance"](1),t["ɵɵproperty"]("ngIf",n.showPlaceholder),t["ɵɵadvance"](1),t["ɵɵproperty"]("ngForOf",n.items))},directives:[n.NgClass,n.NgStyle,n.NgIf,n.NgForOf,n.NgTemplateOutlet],encapsulation:2}),e}(),f=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[s]}},e.ɵmod=t["ɵɵdefineNgModule"]({type:e}),e.ɵinj=t["ɵɵdefineInjector"]({factory:function(t){return new(t||e)},imports:[[n.CommonModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&t["ɵɵsetNgModuleScope"](f,{declarations:[g],imports:[n.CommonModule],exports:[g]}),e.DraggableItemService=s,e.SortableComponent=g,e.SortableModule=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-bootstrap-sortable.umd.min.js.map